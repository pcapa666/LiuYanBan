"use strict";const e=require("../../common/vendor.js"),o={data:()=>({myCollect:0,myMessage:0,userInfo:{nickName:"微信用户",avatarUrl:"https://mmbiz.qpic.cn/mmbiz/icTdbqWNOwNRna42FI242Lcia07jQodd2FJGIYQfG0LAJGFxM4FbnQP6yfMxBgJ0F3YRqJCJ1aPAK2dQagdusBZg/0"}}),onShareAppMessage:function(){return{title:"浩的留言板",path:"/pages/index/index"}},onShareTimeline:()=>({title:"浩的留言板",path:"/pages/index/index"}),methods:{onSuggestion(){e.index.navigateTo({url:"../suggestion/suggestion"})},toMyCollect(){e.index.navigateTo({url:"../myCollect/myCollect"})},toMyMessage(){e.index.navigateTo({url:"../myMessage/myMessage"})},getLocation(){e.index.navigateTo({url:`../login/login?userInfo=${JSON.stringify(this.userInfo)}`})},getUserInfo(){e.Ds.callFunction({name:"fun",data:{api:"getUserInfo",token:e.index.getStorageSync("token")}}).then((o=>{e.index.hideLoading(),this.userInfo=o.result})).catch((()=>{e.index.hideLoading(),e.index.showToast({title:"加载失败",icon:"error"})}))},getMyMessage(){console.log("调用了 getMyMessage() 函数！"),e.Ds.callFunction({name:"fun",data:{api:"getMyMassage",token:e.index.getStorageSync("token")}}).then((e=>{this.myMessage=e.result.message.data.length,this.getMyCollect(),this.getUserInfo()})).catch((()=>{e.index.hideLoading(),e.index.showToast({title:"获取数据失败",icon:"error"})}))},getMyCollect(){console.log("调用了 getMyCollect() 函数！"),e.Ds.callFunction({name:"fun",data:{api:"getMyCollect",token:e.index.getStorageSync("token")}}).then((e=>{this.myCollect=e.result.message.data.length})).catch((()=>{e.index.hideLoading(),e.index.showToast({title:"获取数据失败",icon:"error"})}))}},onShow(){e.index.showLoading({title:"加载中..."}),this.getMyMessage()}};const n=e._export_sfc(o,[["render",function(o,n,t,a,s,i){return{a:s.userInfo.avatarUrl,b:e.t(s.userInfo.nickName),c:1==s.userInfo.sexIndex,d:2==s.userInfo.sexIndex,e:3==s.userInfo.sexIndex,f:e.o(((...e)=>i.getLocation&&i.getLocation(...e))),g:e.t(s.myMessage),h:e.o(((...e)=>i.toMyMessage&&i.toMyMessage(...e))),i:e.t(s.myCollect),j:e.o(((...e)=>i.toMyCollect&&i.toMyCollect(...e))),k:e.o(((...e)=>o.onServiceTap&&o.onServiceTap(...e))),l:e.o(((...e)=>i.onSuggestion&&i.onSuggestion(...e))),m:e.o(((...e)=>o.onRecommendTap&&o.onRecommendTap(...e))),n:e.o(((...e)=>o.onDonateTap&&o.onDonateTap(...e))),o:e.o(((...e)=>o.onDonateTap&&o.onDonateTap(...e)))}}]]);o.__runtimeHooks=6,wx.createPage(n);
